{% extends 'superadmin_base.html' %}
{% load static %}
{% block content %}
{% if messages %}
    <div id="message-container">
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">
                {{ message }}
            </div>
        {% endfor %}
    </div>
    <script>
        setTimeout(() => {
            const messageContainer = document.getElementById('message-container');
            if (messageContainer) {
                messageContainer.style.display = 'none';
            }
        }, 3000);
    </script>
{% endif %}

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/place_order.css' %}">
</head>

<body>
    <h2 class="text-center mb-4">Place New Order</h2>

    <!-- Tab Buttons -->
    <div class="tab-buttons">
        <button type="button" data-tab="rice">Rice</button>
        <button type="button" data-tab="paddy">Paddy</button>
        <button type="button" data-tab="pesticide">Pesticide</button>
    </div>

    <!-- RICE FORM -->
    <div class="tab-content" id="tab-rice">
        <div class="card mb-4">
            <div class="card-header bg-success text-white">Rice Order</div>
            <div class="card-body">
                <form method="post">
                    {% csrf_token %}
                    <input type="hidden" name="product_category_id" value="1">

                    <div class="mb-3">
                        <label class="form-label">Customer</label>
                        <select name="customer" class="form-select" required>
                            {% for customer in customers %}
                                <option value="{{ customer.customer_id }}">
                                    {{ customer.first_name }} {{ customer.last_name }} ({{ customer.company_name }})
                                </option>
                            {% empty %}
                                <option disabled>No customers found for this admin</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Quantity</label>
                        <input type="number" name="quantity" class="form-control" required>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Price per Unit</label>
                        <input type="number" name="price_per_unit" class="form-control" required>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Lorry Number</label>
                        <input type="text" name="lorry_number" class="form-control" required>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Driver Name</label>
                        <input type="text" name="driver_name" class="form-control" required>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Driver Phone Number</label>
                        <input type="text" name="driver_ph_no" class="form-control" required>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Delivery Date</label>
                        <input type="date" name="delivery_date" class="form-control" required>
                    </div>

                    <button type="submit" class="btn btn-success">Place Rice Order</button>
                </form>
            </div>
        </div>
    </div>

    <!-- PADDY FORM -->
    <div class="tab-content" id="tab-paddy">
        <div class="card mb-4">
            <div class="card-header bg-primary text-white">Paddy Order</div>
            <div class="card-body">
                <form method="post">
                    {% csrf_token %}
                    <input type="hidden" name="product_category_id" value="2">

                    <div class="mb-3">
                        <label class="form-label">Customer</label>
                        <select name="customer" class="form-select" required>
                            {% for customer in customers %}
                                <option value="{{ customer.customer_id }}">
                                    {{ customer.first_name }} {{ customer.last_name }} ({{ customer.company_name }})
                                </option>
                            {% empty %}
                                <option disabled>No customers found for this admin</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Quantity</label>
                        <input type="number" name="quantity" class="form-control" required>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Price per Unit</label>
                        <input type="number" name="price_per_unit" class="form-control" required>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Lorry Number</label>
                        <input type="text" name="lorry_number" class="form-control" required>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Driver Name</label>
                        <input type="text" name="driver_name" class="form-control" required>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Driver Phone Number</label>
                        <input type="text" name="driver_ph_no" class="form-control" required>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Delivery Date</label>
                        <input type="date" name="delivery_date" class="form-control" required>
                    </div>

                    <button type="submit" class="btn btn-primary">Place Paddy Order</button>
                </form>
            </div>
        </div>
    </div>

    <!-- PESTICIDE FORM -->
    <div class="tab-content" id="tab-pesticide">
        <div class="card mb-4">
            <div class="card-header bg-warning">Pesticide Order</div>
            <div class="card-body">
                <form method="post">
                    {% csrf_token %}
                    <input type="hidden" name="product_category_id" value="3">

                    <div class="mb-3">
                        <label class="form-label">Customer</label>
                        <select name="customer" class="form-select" required>
                            {% for customer in customers %}
                                <option value="{{ customer.customer_id }}">
                                    {{ customer.first_name }} {{ customer.last_name }} ({{ customer.company_name }})
                                </option>
                            {% empty %}
                                <option disabled>No customers found for this admin</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Quantity</label>
                        <input type="number" name="quantity" class="form-control" required>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Price per Unit</label>
                        <input type="number" name="price_per_unit" class="form-control" required>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Lorry Number</label>
                        <input type="text" name="lorry_number" class="form-control" required>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Driver Name</label>
                        <input type="text" name="driver_name" class="form-control" required>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Driver Phone Number</label>
                        <input type="text" name="driver_ph_no" class="form-control" required>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Delivery Date</label>
                        <input type="date" name="delivery_date" class="form-control" required>
                    </div>

                    <button type="submit" class="btn btn-warning">Place Pesticide Order</button>
                </form>
            </div>
        </div>
    </div>


<script>
    document.addEventListener("DOMContentLoaded", function () {
        const buttons = document.querySelectorAll(".tab-buttons button");
        const tabs = document.querySelectorAll(".tab-content");

        function showTab(tabId) {
            tabs.forEach(tab => tab.classList.remove("active"));
            document.getElementById("tab-" + tabId).classList.add("active");

            buttons.forEach(btn => btn.classList.remove("active"));
            document.querySelector(`[data-tab="${tabId}"]`).classList.add("active");
        }

        // Show default tab
        showTab("rice");

        buttons.forEach(button => {
            button.addEventListener("click", () => {
                const tabId = button.getAttribute("data-tab");
                showTab(tabId);
            });
        });
    });
</script>
</body>
{% endblock %}
