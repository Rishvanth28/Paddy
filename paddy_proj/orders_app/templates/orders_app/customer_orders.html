{% extends 'customer_app/customer_base.html' %}
{% load static %}

{% block content %}
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
<style>
/* CSS Variables */
.customer-orders-page {
    --primary: #000000;
    --primary-hover: #1a1a1a;
    --primary-light: #f5f5f5;
    --secondary: #8b5cf6;
    --secondary-hover: #7c3aed;
    --secondary-light: #f3e8ff;
    --blue: #3b82f6;
    --blue-hover: #2563eb;
    --blue-light: #dbeafe;
    --success: #10b981;
    --success-light: #d1fae5;
    --warning: #f59e0b;
    --warning-light: #fef3c7;
    --danger: #ef4444;
    --danger-light: #fee2e2;
    --info: #64748b;
    --info-light: #f1f5f9;
    --light: #f8fafc;
    --dark: #0f172a;
    --gray: #64748b;
    --gray-light: #f1f5f9;
    --border: #e2e8f0;
    --border-light: #f1f5f9;
    --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
    --border-radius: 12px;
    --border-radius-sm: 8px;
    --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    --text-inverse: #fff;
}

/* Base styles for customer orders page only */
.customer-orders-page {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    color: #0f172a;
    line-height: 1.6;
    font-weight: 400;
    min-height: 100vh;
    padding: 0;
    margin: 0;
}

.customer-orders-page *,
.customer-orders-page *::before,
.customer-orders-page *::after {
    box-sizing: border-box;
}

/* Container */
.customer-orders-page .container-fluid {
    width: 100%;
    max-width: 100%;
    padding: 1.5rem;
    margin: 0 auto;
    background: transparent;
    min-height: 100vh !important;
    color: #262626 !important;
}

/* Badges */
.customer-orders-page .badge {
    display: inline-block;
    padding: 0.35em 0.65em;
    font-size: 0.75em;
    font-weight: 700;
    line-height: 1;
    color: #fff;
    text-align: center;
    white-space: nowrap;
    vertical-align: baseline;
    border-radius: 0.25rem;
}

.customer-orders-page .bg-primary {
    background-color: var(--primary) !important;
}

.customer-orders-page .bg-success {
    background-color: var(--success) !important;
}

.customer-orders-page .bg-warning {
    background-color: var(--warning) !important;
    color: #000 !important;
}

.customer-orders-page .bg-danger {
    background-color: var(--danger) !important;
}

.customer-orders-page .bg-secondary {
    background-color: #6c757d !important;
}

.customer-orders-page .text-dark {
    color: #000 !important;
}

/* Page body override */
.customer-orders-page body,
body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
    color: var(--dark);
    line-height: 1.6;
    font-weight: 400;
    min-height: 100vh;
}

/* Loading Spinner */
.customer-orders-page .spinner-border {
    display: inline-block;
    width: 2rem;
    height: 2rem;
    vertical-align: text-bottom;
    border: 0.25em solid currentColor;
    border-right-color: transparent;
    border-radius: 50%;
    animation: spinner-border 0.75s linear infinite;
}

@keyframes spinner-border {
    to {
        transform: rotate(360deg);
    }
}

/* Grid System */
.customer-orders-page .row {
    display: flex;
    flex-wrap: wrap;
    margin: -0.75rem;
}

.customer-orders-page .col-md-4 {
    flex: 0 0 33.333333%;
    max-width: 33.333333%;
    padding: 0.75rem;
}

.customer-orders-page .col-md-8 {
    flex: 0 0 66.666667%;
    max-width: 66.666667%;
    padding: 0.75rem;
}

.customer-orders-page .col-md-2 {
    flex: 0 0 16.666667%;
    max-width: 16.666667%;
    padding: 0.75rem;
}

.customer-orders-page .col-md-5 {
    flex: 0 0 41.666667%;
    max-width: 41.666667%;
    padding: 0.75rem;
}

/* Responsive grid */
@media (max-width: 767.98px) {
    .customer-orders-page .row {
        flex-direction: column !important;
    }
    
    .customer-orders-page .flex-between{
        display: flex;
        justify-content: space-between;
        align-items: center;
            flex-direction: column;
    }
    .customer-orders-page .col-md-4,
    .customer-orders-page .col-md-8,
    .customer-orders-page .col-md-2,
    .customer-orders-page .col-md-5 {
        flex: 0 0 100%;
        max-width: 100%;
    }
}

/* Position utilities */
.customer-orders-page .position-relative {
    position: relative !important;
}

.customer-orders-page .position-absolute {
    position: absolute !important;
}

.customer-orders-page .top-50 {
    top: 50% !important;
}

.customer-orders-page .start-50 {
    left: 50% !important;
}

.customer-orders-page .translate-middle-x {
    transform: translateX(-50%) !important;
}

.customer-orders-page .relative {
    position: relative;
}

.customer-orders-page .absolute {
    position: absolute;
}

/* Modern List Group */
.customer-orders-page .list-group {
    display: flex;
    flex-direction: column;
    padding-left: 0;
    margin-bottom: 0;
    border-radius: var(--border-radius-sm);
    gap: 0.5rem;
    padding: 0.75rem;
}

.customer-orders-page .list-group-item {
    position: relative;
    display: block;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%);
    border: 1px solid rgba(99, 102, 241, 0.1);
    border-radius: var(--border-radius-sm);
    text-decoration: none;
    color: inherit;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    backdrop-filter: blur(10px);
}

.customer-orders-page .list-group-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 4px;
    height: 100%;
    background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
    border-radius: var(--border-radius-sm) 0 0 var(--border-radius-sm);
    opacity: 0;
    transition: opacity 0.3s ease;
}

.customer-orders-page .list-group-item:hover::before {
    opacity: 1;
}

.customer-orders-page .list-group-item:first-child {
    border-top-left-radius: var(--border-radius-sm);
    border-top-right-radius: var(--border-radius-sm);
}

.customer-orders-page .list-group-item:last-child {
    border-bottom-right-radius: var(--border-radius-sm);
    border-bottom-left-radius: var(--border-radius-sm);
}

.customer-orders-page .list-group-item.active {
    z-index: 2;
    color: #fff;
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-hover) 100%);
    border-color: var(--primary);
    box-shadow: 0 8px 25px rgba(99, 102, 241, 0.3);
    transform: translateY(-2px);
}

.customer-orders-page .list-group-item.active::before {
    opacity: 1;
    background: rgba(255, 255, 255, 0.2);
}

.customer-orders-page .d-flex {
    display: flex !important;
}

.customer-orders-page .flex-between {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.customer-orders-page .flex-center {
    display: flex;
    align-items: center;
}

.customer-orders-page .flex-col {
    display: flex;
    flex-direction: column;
}

.customer-orders-page .flex-wrap {
    flex-wrap: wrap;
}

.customer-orders-page .hidden {
    display: none !important;
}

.customer-orders-page .block {
    display: block !important;
}

/* Size utilities */
.customer-orders-page .w-25 {
    width: 25% !important;
}

.customer-orders-page .w-50 {
    width: 50% !important;
}

.customer-orders-page .w-75 {
    width: 75% !important;
}

.customer-orders-page .w-100 {
    width: 100% !important;
}

/* Background utilities */
.customer-orders-page .bg-light {
    background-color: var(--light) !important;
}

.customer-orders-page .bg-white {
    background-color: #ffffff !important;
}

.customer-orders-page .bg-transparent {
    background-color: transparent !important;
}

/* Display utilities */
.customer-orders-page .d-none {
    display: none !important;
}

.customer-orders-page .d-block {
    display: block !important;
}

.customer-orders-page .d-inline {
    display: inline !important;
}

.customer-orders-page .d-inline-block {
    display: inline-block !important;
}

/* Responsive utilities */
@media (max-width: 575.98px) {
    .customer-orders-page .d-sm-none {
        display: none !important;
    }
    .customer-orders-page .d-sm-block {
        display: block !important;
    }
}

@media (min-width: 576px) {
    .customer-orders-page .d-sm-block {
        display: block !important;
    }
    .customer-orders-page .d-sm-none {
        display: none !important;
    }
}

@media (max-width: 767.98px) {
    .customer-orders-page .d-md-none {
        display: none !important;
    }
}

@media (min-width: 768px) {
    .customer-orders-page .d-md-block {
        display: block !important;
    }
    .customer-orders-page .d-md-flex {
        display: flex !important;
    }
}

@media (max-width: 991.98px) {
    .customer-orders-page .d-lg-none {
        display: none !important;
    }
}

@media (min-width: 992px) {
    .customer-orders-page .d-lg-block {
        display: block !important;
    }
    .customer-orders-page .d-lg-flex {
        display: flex !important;
    }
}

.customer-orders-page .w-full {
    width: 100%;
}

.customer-orders-page .h-full {
    height: 100%;
}

.customer-orders-page .align-items-center {
    align-items: center;
}

.customer-orders-page .justify-content-between {
    justify-content: space-between;
}

.customer-orders-page .justify-content-center {
    justify-content: center;
}

.customer-orders-page .justify-content-end {
    justify-content: flex-end;
}

.customer-orders-page .justify-content-start {
    justify-content: flex-start;
}

/* Spacing utilities */
.customer-orders-page .m-0 {
    margin: 0;
}

.customer-orders-page .mb-0 {
    margin-bottom: 0;
}

.customer-orders-page .mb-1 {
    margin-bottom: 0.25rem;
}

.customer-orders-page .mb-2 {
    margin-bottom: 0.5rem;
}

.customer-orders-page .mb-3 {
    margin-bottom: 1rem;
}

.customer-orders-page .mb-4 {
    margin-bottom: 1.5rem;
}

.customer-orders-page .mb-5 {
    margin-bottom: 3rem;
}

.customer-orders-page .mt-0 {
    margin-top: 0;
}

.customer-orders-page .mt-1 {
    margin-top: 0.25rem;
}

.customer-orders-page .mt-2 {
    margin-top: 0.5rem;
}

.customer-orders-page .mt-3 {
    margin-top: 1rem;
}

.customer-orders-page .mt-4 {
    margin-top: 1.5rem;
}

.customer-orders-page .mt-5 {
    margin-top: 3rem;
}

.customer-orders-page .ms-0 {
    margin-left: 0;
}

.customer-orders-page .ms-1 {
    margin-left: 0.25rem;
}

.customer-orders-page .ms-2 {
    margin-left: 0.5rem;
}

.customer-orders-page .ms-3 {
    margin-left: 1rem;
}

.customer-orders-page .ms-4 {
    margin-left: 1.5rem;
}

.customer-orders-page .ms-5 {
    margin-left: 3rem;
}

.customer-orders-page .me-0 {
    margin-right: 0;
}

.customer-orders-page .me-1 {
    margin-right: 0.25rem;
}

.customer-orders-page .me-2 {
    margin-right: 0.5rem;
}

.customer-orders-page .me-3 {
    margin-right: 1rem;
}

.customer-orders-page .me-4 {
    margin-right: 1.5rem;
}

.customer-orders-page .me-5 {
    margin-right: 3rem;
}

.customer-orders-page .mx-0 {
    margin-left: 0;
    margin-right: 0;
}

.customer-orders-page .mx-1 {
    margin-left: 0.25rem;
    margin-right: 0.25rem;
}

.customer-orders-page .mx-2 {
    margin-left: 0.5rem;
    margin-right: 0.5rem;
}

.customer-orders-page .mx-3 {
    margin-left: 1rem;
    margin-right: 1rem;
}

.customer-orders-page .mx-4 {
    margin-left: 1.5rem;
    margin-right: 1.5rem;
}

.customer-orders-page .mx-5 {
    margin-left: 3rem;
    margin-right: 3rem;
}

.customer-orders-page .my-0 {
    margin-top: 0;
    margin-bottom: 0;
}

.customer-orders-page .my-1 {
    margin-top: 0.25rem;
    margin-bottom: 0.25rem;
}

.customer-orders-page .my-2 {
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
}

.customer-orders-page .my-3 {
    margin-top: 1rem;
    margin-bottom: 1rem;
}

.customer-orders-page .my-4 {
    margin-top: 1.5rem;
    margin-bottom: 1.5rem;
}

.customer-orders-page .my-5 {
    margin-top: 3rem;
    margin-bottom: 3rem;
}

/* Padding utilities */
.customer-orders-page .p-0 {
    padding: 0;
}

.customer-orders-page .p-1 {
    padding: 0.25rem;
}

.customer-orders-page .p-2 {
    padding: 0.5rem;
}

.customer-orders-page .p-3 {
    padding: 1rem;
}

.customer-orders-page .p-4 {
    padding: 1.5rem;
}

.customer-orders-page .p-5 {
    padding: 3rem;
}

.customer-orders-page .px-0 {
    padding-left: 0;
    padding-right: 0;
}

.customer-orders-page .px-1 {
    padding-left: 0.25rem;
    padding-right: 0.25rem;
}

.customer-orders-page .px-2 {
    padding-left: 0.5rem;
    padding-right: 0.5rem;
}

.customer-orders-page .px-3 {
    padding-left: 1rem;
    padding-right: 1rem;
}

.customer-orders-page .px-4 {
    padding-left: 1.5rem;
    padding-right: 1.5rem;
}

.customer-orders-page .px-5 {
    padding-left: 3rem;
    padding-right: 3rem;
}

.customer-orders-page .py-0 {
    padding-top: 0;
    padding-bottom: 0;
}

.customer-orders-page .py-1 {
    padding-top: 0.25rem;
    padding-bottom: 0.25rem;
}

.customer-orders-page .py-2 {
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
}

.customer-orders-page .py-3 {
    padding-top: 1rem;
    padding-bottom: 1rem;
}

.customer-orders-page .py-4 {
    padding-top: 1.5rem;
    padding-bottom: 1.5rem;
}

.customer-orders-page .py-5 {
    padding-top: 3rem;
    padding-bottom: 3rem;
}

.customer-orders-page .text-center {
    text-align: center;
}

.customer-orders-page .text-start {
    text-align: left;
}

.customer-orders-page .text-end {
    text-align: right;
}

.customer-orders-page .text-muted {
    color: var(--gray);
}

.customer-orders-page .text-primary {
    color: var(--primary) !important;
}

.customer-orders-page .fw-medium {
    font-weight: 500;
}

.customer-orders-page .fw-bold {
    font-weight: 700;
}

.customer-orders-page .fw-bolder {
    font-weight: 800;
}

.customer-orders-page .gap-1 {
    gap: 0.25rem;
}

.customer-orders-page .gap-2 {
    gap: 0.5rem;
}

.customer-orders-page .gap-3 {
    gap: 1rem;
}

.customer-orders-page .gap-4 {
    gap: 1.5rem;
}

.customer-orders-page .rounded {
    border-radius: var(--border-radius-sm);
}

.customer-orders-page .rounded-pill {
    border-radius: 50rem;
}

.customer-orders-page .overflow-hidden {
    overflow: hidden;
}

.customer-orders-page .overflow-auto {
    overflow: auto;
}

.customer-orders-page .overflow-y-auto {
    overflow-y: auto;
}
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%);
    border-radius: var(--border-radius);
    border: 1px solid rgba(99, 102, 241, 0.1);
    box-shadow: var(--shadow);
    overflow: hidden;
    color: var(--dark);
    transition: var(--transition);
    position: relative;
    backdrop-filter: blur(10px);
}

.customer-orders-page .dashboard-card::before,
.customer-orders-page .customer-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, var(--primary) 0%, var(--info) 50%, var(--success) 100%);
    z-index: 1;
}

.customer-orders-page .dashboard-card:hover,
.customer-orders-page .customer-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 40px rgba(99, 102, 241, 0.15);
    border-color: rgba(99, 102, 241, 0.2);
}

.customer-orders-page .dashboard-card:hover::before,
.customer-orders-page .customer-card:hover::before {
    opacity: 1;
}

/* Modern Card Header */
.customer-orders-page .card-header {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.8) 0%, rgba(248, 250, 252, 0.8) 100%);
    padding: 1.5rem 2rem;
    border-bottom: 1px solid rgba(99, 102, 241, 0.1);
    display: flex;
    align-items: center;
    justify-content: space-between;
    backdrop-filter: blur(10px);
    position: relative;
    z-index: 2;
}

.customer-orders-page .card-header h5 {
    margin: 0;
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--dark);
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.customer-orders-page .card-header h5 i {
    font-size: 1.1rem;
    color: var(--primary);
}

.customer-orders-page .subtitle {
    font-size: 0.875rem;
    color: var(--gray);
    margin-top: 0.25rem;
    font-weight: 400;
}

/* Modern Alert System */
.customer-orders-page .alert {
    padding: 1rem 1.5rem;
    margin-bottom: 1rem;
    border-radius: var(--border-radius);
    border: 1px solid transparent;
    position: relative;
    font-size: 0.95rem;
    line-height: 1.5;
    background: rgba(255, 255, 255, 0.9);
    animation: slideInDown 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    font-weight: 500;
    backdrop-filter: blur(10px);
    box-shadow: var(--shadow);
}

@keyframes slideInDown {
    from {
        transform: translateY(-20px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.customer-orders-page .alert-success {
    background: linear-gradient(135deg, rgba(16, 185, 129, 0.05) 0%, rgba(16, 185, 129, 0.02) 100%);
    border-color: rgba(16, 185, 129, 0.2);
    color: var(--success);
    box-shadow: 0 4px 20px rgba(16, 185, 129, 0.1);
}

.customer-orders-page .alert-warning {
    background: linear-gradient(135deg, rgba(245, 158, 11, 0.05) 0%, rgba(245, 158, 11, 0.02) 100%);
    border-color: rgba(245, 158, 11, 0.2);
    color: var(--warning);
    box-shadow: 0 4px 20px rgba(245, 158, 11, 0.1);
}

.customer-orders-page .alert-danger,
.customer-orders-page .alert-error {
    background: linear-gradient(135deg, rgba(239, 68, 68, 0.05) 0%, rgba(239, 68, 68, 0.02) 100%);
    border-color: rgba(239, 68, 68, 0.2);
    color: var(--danger);
    box-shadow: 0 4px 20px rgba(239, 68, 68, 0.1);
}

.customer-orders-page .alert-info {
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.05) 0%, rgba(59, 130, 246, 0.02) 100%);
    border-color: rgba(59, 130, 246, 0.2);
    color: var(--info);
    box-shadow: 0 4px 20px rgba(59, 130, 246, 0.1);
}

.customer-orders-page .btn-close {
    position: absolute;
    top: 0.5rem;
    right: 1rem;
    background: none;
    border: none;
    font-size: 1.25rem;
    cursor: pointer;
    color: inherit;
    opacity: 0.7;
    transition: var(--transition);
    z-index: 3;
}

.customer-orders-page .btn-close:hover {
    opacity: 1;
    transform: scale(1.1);
}

/* Modern Button System */
.customer-orders-page .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.625rem 1.25rem;
    font-size: 0.875rem;
    font-weight: 600;
    text-align: center;
    text-decoration: none;
    border: 1px solid transparent;
    border-radius: var(--border-radius-sm);
    background-color: var(--light);
    color: var(--dark);
    cursor: pointer;
    transition: var(--transition);
    margin: 0.125rem;
    position: relative;
    overflow: hidden;
    letter-spacing: 0.025em;
    white-space: nowrap;
}

.customer-orders-page .btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.5s;
}

.customer-orders-page .btn:hover::before {
    left: 100%;
}

.customer-orders-page .btn-primary {
    background-color: var(--primary);
    border-color: var(--primary);
    color: var(--text-inverse);
}

.customer-orders-page .btn-primary:hover,
.customer-orders-page .btn-primary:focus {
    background-color: var(--primary-hover);
    border-color: var(--primary-hover);
    color: var(--text-inverse);
    box-shadow: var(--shadow-md);
    transform: translateY(-1px);
}

.customer-orders-page .btn-primary1 {
    background-color: var(--primary);
    border-color: var(--primary);
    color: var(--text-inverse);
}

.customer-orders-page .btn-primary1:hover,
.customer-orders-page .btn-primary1:focus {
    background-color: var(--primary-hover);
    border-color: var(--primary-hover);
    color: var(--text-inverse);
    box-shadow: var(--shadow-md);
    transform: translateY(-1px);
}

.customer-orders-page .btn-secondary {
    background-color: var(--light);
    border-color: var(--border);
    color: var(--dark);
}

.customer-orders-page .btn-secondary:hover,
.customer-orders-page .btn-secondary:focus {
    background-color: var(--gray-light);
    border-color: var(--gray);
    color: var(--dark);
    transform: translateY(-1px);
}

.customer-orders-page .btn-outline-primary {
    border-color: var(--primary) !important;
    color: var(--primary) !important;
    background-color: transparent !important;
}

.customer-orders-page .btn-outline-primary:hover,
.customer-orders-page .btn-outline-primary:focus {
    background-color: var(--primary) !important;
    color: var(--text-inverse) !important;
    transform: translateY(-1px);
}

.customer-orders-page .btn-outline-secondary {
    color: var(--secondary) !important;
    border-color: var(--secondary) !important;
    background-color: transparent !important;
}

.customer-orders-page .btn-outline-secondary:hover,
.customer-orders-page .btn-outline-secondary:focus {
    color: #fff !important;
    background-color: var(--secondary) !important;
    border-color: var(--secondary) !important;
    transform: translateY(-1px);
}

.customer-orders-page .btn-outline-blue {
    color: var(--blue) !important;
    border-color: var(--blue) !important;
    background-color: transparent !important;
}

.customer-orders-page .btn-outline-blue:hover,
.customer-orders-page .btn-outline-blue:focus {
    color: #fff !important;
    background-color: var(--blue) !important;
    border-color: var(--blue) !important;
    transform: translateY(-1px);
}

.customer-orders-page .btn-success {
    background-color: var(--success);
    border-color: var(--success);
    color: var(--text-inverse);
}

.customer-orders-page .btn-success:hover,
.customer-orders-page .btn-success:focus {
    background-color: #059669;
    border-color: #059669;
    color: var(--text-inverse);
    transform: translateY(-1px);
}

.customer-orders-page .btn-outline-success {
    border-color: var(--success) !important;
    color: var(--success) !important;
    background-color: transparent !important;
}

.customer-orders-page .btn-outline-success:hover {
    background-color: var(--success) !important;
    color: var(--text-inverse) !important;
    transform: translateY(-1px);
}

.customer-orders-page .btn-outline-warning {
    border-color: var(--warning) !important;
    color: var(--warning) !important;
    background-color: transparent !important;
}

.customer-orders-page .btn-outline-warning:hover {
    background-color: var(--warning) !important;
    color: var(--text-inverse) !important;
    transform: translateY(-1px);
}

.customer-orders-page .btn-outline-danger {
    border-color: var(--danger) !important;
    color: var(--danger) !important;
    background-color: transparent !important;
}

.customer-orders-page .btn-outline-danger:hover {
    background-color: var(--danger) !important;
    color: var(--text-inverse) !important;
    transform: translateY(-1px);
}

.customer-orders-page .btn-warning {
    background-color: var(--warning);
    border-color: var(--warning);
    color: var(--text-inverse);
}

.customer-orders-page .btn-danger {
    background-color: var(--danger);
    border-color: var(--danger);
    color: var(--text-inverse);
}

.customer-orders-page .btn-outline-success:hover {
    background: var(--success);
    color: white;
    transform: translateY(-2px);
}

.customer-orders-page .btn-outline-warning {
    border-color: var(--warning);
    color: var(--warning);
    background: rgba(245, 158, 11, 0.05);
}

.customer-orders-page .btn-outline-warning:hover {
    background: var(--warning);
    color: white;
    transform: translateY(-2px);
}

.customer-orders-page .btn-outline-danger {
    border-color: var(--danger);
    color: var(--danger);
    background: rgba(239, 68, 68, 0.05);
}

.customer-orders-page .btn-outline-danger:hover {
    background: var(--danger);
    color: white;
    transform: translateY(-2px);
}

.customer-orders-page .btn-warning {
    background: linear-gradient(135deg, var(--warning) 0%, #d97706 100%);
    border-color: var(--warning);
    color: white;
    box-shadow: 0 4px 15px rgba(245, 158, 11, 0.2);
}

.customer-orders-page .btn-danger {
    background: linear-gradient(135deg, var(--danger) 0%, #dc2626 100%);
    border-color: var(--danger);
    color: white;
    box-shadow: 0 4px 15px rgba(239, 68, 68, 0.2);
}

/* Status Filter Buttons */
.customer-orders-page .status-filter {
    padding: 0.5rem 1rem;
    font-size: 0.8rem;
    border-radius: var(--border-radius-sm);
    transition: var(--transition);
    margin: 0.125rem;
    position: relative;
    z-index: 1;
}

/* Active and hover states for status filters */
.customer-orders-page .status-filter.active {
    transform: translateY(-1px) !important;
    box-shadow: var(--shadow-md) !important;
}

.customer-orders-page .status-filter:hover {
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
}

/* Special active states for different button types */
.customer-orders-page .btn-outline-success.status-filter.active {
    background-color: var(--success) !important;
    color: var(--text-inverse) !important;
    border-color: var(--success) !important;
}

.customer-orders-page .btn-outline-danger.status-filter.active {
    background-color: var(--danger) !important;
    color: var(--text-inverse) !important;
    border-color: var(--danger) !important;
}

.customer-orders-page .btn-outline-blue.status-filter.active {
    background-color: var(--blue) !important;
    color: var(--text-inverse) !important;
    border-color: var(--blue) !important;
}

.customer-orders-page .btn-outline-secondary.status-filter.active {
    background-color: var(--secondary) !important;
    color: var(--text-inverse) !important;
    border-color: var(--secondary) !important;
}

.customer-orders-page .btn-primary.status-filter.active {
    background-color: var(--primary) !important;
    color: var(--text-inverse) !important;
    border-color: var(--primary) !important;
}

.customer-orders-page .btn-outline-primary.status-filter.active {
    background-color: var(--primary) !important;
    color: var(--text-inverse) !important;
    border-color: var(--primary) !important;
}

/* Payment button */
.customer-orders-page .payment-btn {
    font-weight: 600;
    padding: 0.75rem 1.5rem;
    box-shadow: var(--shadow-sm);
    transition: var(--transition-normal);
}

/* Modern Filter Section */
.customer-orders-page .filter-section {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    border-radius: var(--border-radius);
    padding: 2rem;
    margin-bottom: 2rem;
    box-shadow: var(--shadow-md);
    position: relative;
}

.customer-orders-page .filter-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, var(--primary) 0%, var(--info) 100%);
    border-radius: var(--border-radius) var(--border-radius) 0 0;
}

.customer-orders-page .filter-section h5 {
    font-size: 1.25rem;
    font-weight: 700;
    margin-bottom: 1.5rem;
    color: var(--dark);
    letter-spacing: -0.025em;
}

.customer-orders-page .form-label {
    font-weight: 600;
    color: var(--dark);
    margin-bottom: 0.75rem;
    font-size: 0.875rem;
    letter-spacing: 0.025em;
    display: block;
}

.customer-orders-page .form-control,
.customer-orders-page .form-select {
    border: 1px solid var(--border);
    border-radius: var(--border-radius-sm);
    padding: 0.625rem 0.875rem;
    font-size: 0.875rem;
    background: rgba(255, 255, 255, 0.9);
    color: var(--dark);
    transition: var(--transition);
    backdrop-filter: blur(10px);
    box-shadow: var(--shadow-sm);
    width: 100% ;
}

.customer-orders-page .form-control:focus,
.customer-orders-page .form-select:focus {
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.1);
    outline: none;
    background: rgba(255, 255, 255, 1);
}

/* Search input styling */
.customer-orders-page .search-container {
    position: relative;
    display: flex;
    align-items: center;
}

.customer-orders-page .search-container .bi-search {
    position: absolute;
    left: 1rem;
    top: 50%;
    transform: translateY(-50%);
    color: var(--gray);
    z-index: 1;
    pointer-events: none;
}

.customer-orders-page .search-input {
    padding-left: 3rem !important;
    width: 100%;
    height: 38px;
}

/* Modern Order List Container */
.customer-orders-page .order-list-container {
    height: auto;
    min-height: 300px;
    max-height: calc(100vh - 200px);
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.customer-orders-page .order-list-container .list-group {
    flex: 1;
    min-height: 250px;
    max-height: calc(100vh - 200px);
    overflow-y: auto;
    scrollbar-width: thin;
    scrollbar-color: var(--primary) transparent;
    padding: 0.75rem;
    gap: 0.75rem;
    display: flex;
    flex-direction: column;
}

.customer-orders-page .order-list-container .list-group::-webkit-scrollbar {
    width: 8px;
}

.customer-orders-page .order-list-container .list-group::-webkit-scrollbar-track {
    background: transparent;
}

.customer-orders-page .order-list-container .list-group::-webkit-scrollbar-thumb {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-hover) 100%);
    border-radius: 8px;
    border: 2px solid transparent;
    background-clip: content-box;
}

.customer-orders-page .order-list-container .list-group::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(135deg, var(--primary-hover) 0%, var(--primary) 100%);
}

/* Modern Order Item Styles */
.customer-orders-page .order-item {
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    padding: 0;
    height: auto;
    min-height: auto;
    display: flex;
    align-items: stretch;
    overflow: hidden;
    border-radius: var(--border-radius-sm);
    width: 100%;
    box-sizing: border-box;
    margin-bottom: 0.75rem;
    flex-shrink: 0;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%);
    border: 1px solid rgba(99, 102, 241, 0.1);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    backdrop-filter: blur(10px);
}

.customer-orders-page .order-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 4px;
    height: 100%;
    background: linear-gradient(135deg, var(--primary) 0%, var(--info) 100%);
    opacity: 0;
    transition: opacity 0.3s ease;
}

.customer-orders-page .order-item:hover::before {
    opacity: 1;
}

.customer-orders-page .order-item-content {
    padding: 1rem;
    width: 100%;
    display: flex;
    flex-direction: column;
    box-sizing: border-box;
    min-height: auto;
    height: auto;
    justify-content: flex-start;
    gap: 0.75rem;
    flex-shrink: 0;
}

.customer-orders-page .order-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(99, 102, 241, 0.15);
    border-color: var(--primary);
}

.customer-orders-page .order-item.active {
    z-index: 2;
    color: #fff;
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-hover) 100%);
    border-color: var(--primary);
    box-shadow: 0 12px 35px rgba(99, 102, 241, 0.3);
    transform: translateY(-2px);
}

.customer-orders-page .order-item.active::before {
    opacity: 1;
    background: rgba(255, 255, 255, 0.2);
}

.customer-orders-page .order-item .badge {
    font-size: 0.75rem;
    padding: 0.25rem 0.75rem;
    border-radius: 20px;
    font-weight: 600;
    letter-spacing: 0.025em;
}

/* Order Item Header */
.customer-orders-page .order-item-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 0;
    flex-wrap: wrap;
    gap: 0.5rem;
}

.customer-orders-page .order-item-title {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    flex: 1;
    min-width: 0;
}

.customer-orders-page .order-item-title .order-number {
    font-weight: 700;
    font-size: 1rem;
    color: var(--dark);
}

.customer-orders-page .order-item.active .order-item-title .order-number {
    color: white;
}

.customer-orders-page .order-date {
    font-size: 0.8rem;
    color: var(--gray);
    font-weight: 500;
}

.customer-orders-page .order-item.active .order-date {
    color: rgba(255, 255, 255, 0.8);
}

/* Order Item Body */
.customer-orders-page .order-item-body {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    flex-wrap: wrap;
    gap: 0.75rem;
}

.customer-orders-page .order-item-details {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    flex: 1;
    min-width: 0;
}

.customer-orders-page .order-category {
    font-size: 0.8rem;
    color: var(--primary);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.customer-orders-page .order-item.active .order-category {
    color: rgba(255, 255, 255, 0.9);
}

.customer-orders-page .customer-name {
    font-size: 0.9rem;
    color: var(--dark);
    font-weight: 500;
}

.customer-orders-page .order-item.active .customer-name {
    color: white;
}

.customer-orders-page .admin-info {
    font-size: 0.8rem;
    color: var(--gray);
    font-weight: 400;
}

.customer-orders-page .order-item.active .admin-info {
    color: rgba(255, 255, 255, 0.7);
}

/* Order Item Amount & Status */
.customer-orders-page .order-item-amount {
    text-align: right;
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 0.75rem;
    flex-shrink: 0;
}

.customer-orders-page .order-amount {
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--dark);
}

.customer-orders-page .order-item.active .order-amount {
    color: white;
}

.customer-orders-page .order-status-badges {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    align-items: flex-end;
}

/* Enhanced Order Status System */
.customer-orders-page .order-status {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.375rem 0.875rem;
    border-radius: var(--border-radius);
    font-weight: 600;
    font-size: 0.8rem;
    letter-spacing: 0.025em;
    box-shadow: var(--shadow-sm);
}

.customer-orders-page .order-status-icon {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    display: inline-block;
    box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.3);
}

.customer-orders-page .status-completed {
    background: linear-gradient(135deg, var(--success) 0%, #059669 100%);
    color: white;
}

.customer-orders-page .status-completed .order-status-icon {
    background-color: rgba(255, 255, 255, 0.9);
}

.customer-orders-page .status-pending {
    background: linear-gradient(135deg, var(--warning) 0%, #d97706 100%);
    color: white;
}

.customer-orders-page .status-pending .order-status-icon {
    background-color: rgba(255, 255, 255, 0.9);
}

/* Enhanced Status badges */
.customer-orders-page .bg-danger {
    background: linear-gradient(135deg, var(--danger) 0%, #dc2626 100%) !important;
    color: white !important;
    padding: 0.375rem 0.75rem;
    border-radius: var(--border-radius);
    font-size: 0.75rem;
    font-weight: 600;
    box-shadow: 0 2px 8px rgba(239, 68, 68, 0.2);
    border: none;
}

.customer-orders-page .bg-success {
    background: linear-gradient(135deg, var(--success) 0%, #059669 100%) !important;
    color: white !important;
    padding: 0.375rem 0.75rem;
    border-radius: var(--border-radius);
    font-size: 0.75rem;
    font-weight: 600;
    box-shadow: 0 2px 8px rgba(16, 185, 129, 0.2);
    border: none;
}

.customer-orders-page .bg-secondary {
    background: linear-gradient(135deg, var(--gray-500) 0%, var(--gray-600) 100%) !important;
    color: white !important;
    padding: 0.375rem 0.75rem;
    border-radius: var(--border-radius);
    font-size: 0.75rem;
    font-weight: 600;
    box-shadow: 0 2px 8px rgba(107, 114, 128, 0.2);
    border: none;
}

.customer-orders-page .orange-status {
    background: linear-gradient(135deg, var(--warning) 0%, #d97706 100%) !important;
    color: white !important;
    padding: 0.375rem 0.75rem;
    border-radius: var(--border-radius);
    font-size: 0.75rem;
    font-weight: 600;
    box-shadow: 0 2px 8px rgba(245, 158, 11, 0.2);
    border: none;
}

/* Modern Order Detail Elements */
.customer-orders-page .detail-header {
    padding: 2rem 0.5rem 1.5rem 0.5rem;
    border-radius: var(--border-radius);
    position: relative;
    overflow: visible;
    max-height: none;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    z-index: 2;
    transition: box-shadow 0.2s;
}

.customer-orders-page .detail-header-div {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: 1.5rem;
}

.customer-orders-page .detail-header h5 {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--primary);
    margin-bottom: 0.25rem;
    letter-spacing: -0.01em;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.customer-orders-page .detail-header p {
    font-size: 1rem;
    color: var(--gray);
    margin-bottom: 0;
    font-weight: 500;
}

.customer-orders-page .detail-header .order-status-badges {
    display: flex;
    gap: 0.5rem;
    align-items: center;
    flex-wrap: wrap;
}

.customer-orders-page .detail-header .badge {
    font-size: 0.85em;
    padding: 0.4em 1em;
    border-radius: 16px;
    font-weight: 600;
    box-shadow: 0 1px 4px rgba(99,102,241,0.08);
}

.customer-orders-page .detail-header::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, var(--primary) 0%, var(--info) 100%);
    border-radius: inherit;
}

.customer-orders-page .detail-section {
    padding: 1.25rem;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.8) 0%, rgba(248, 250, 252, 0.8) 100%);
    border-radius: var(--border-radius);
    border: 1px solid rgba(99, 102, 241, 0.08);
    backdrop-filter: blur(10px);
    position: relative;
    transition: all 0.3s ease;
    margin-bottom: 1rem;
}

.customer-orders-page .detail-section:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
    border-color: rgba(99, 102, 241, 0.15);
}

.customer-orders-page .detail-section h6 {
    font-weight: 700;
    margin-bottom: 1rem;
    color: var(--dark);
    font-size: 1.1rem;
    letter-spacing: -0.025em;
    text-transform: none;
    position: relative;
    padding-left: 1.5rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.customer-orders-page .detail-section h6::before {
    content: '';
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 6px;
    height: 24px;
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-hover) 100%);
    border-radius: 3px;
    box-shadow: 0 2px 8px rgba(99, 102, 241, 0.3);
}

/* Modern Table Styles */
.customer-orders-page .detail-section .table {
    margin-bottom: 0;
    background: transparent;
    border: none;
    box-shadow: none;
}

.customer-orders-page .detail-section .table td {
    padding: 0.75rem 0;
    border-bottom: 1px solid rgba(99, 102, 241, 0.1);
    vertical-align: middle;
    line-height: 1.4;
}

.customer-orders-page .detail-section .table td:first-child {
    font-weight: 500;
    color: var(--gray);
    font-size: 0.9rem;
    width: 40%;
}

.customer-orders-page .detail-section .table td:last-child {
    color: var(--dark);
    font-weight: 600;
    word-break: break-word;
}

/* Table responsive wrapper for horizontal scrolling */
.customer-orders-page .detail-section .table-responsive {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    margin: 0;
    border: none;
    border-radius: var(--border-radius-sm);
}

/* Order Details Grid */
.customer-orders-page .order-details-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1.5rem;
    width: 100%;
}

@media (min-width: 768px) {
    .customer-orders-page .order-details-grid {
        grid-template-columns: 1fr 1fr;
        gap: 2rem;
    }
}

/* Delivery Info Grid */
.customer-orders-page .delivery-info-grid {
    display: grid;
    grid-template-columns: 1fr;
    width: 100%;
    overflow: hidden;
}

@media (min-width: 768px) {
    .customer-orders-page .delivery-info-grid {
        grid-template-columns: 1fr 1fr;
    }
}

/* Items Table */
.customer-orders-page .items-table {
    margin-top: 1.5rem;
    border-radius: var(--border-radius-sm);
    overflow: hidden;
    box-shadow: var(--shadow-md);
    width: 100%;
    table-layout: fixed;
}

.customer-orders-page .items-table th {
    font-weight: 700;
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-hover) 100%);
    color: white;
    border: none;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    font-size: 0.75rem;
    padding: 0.5rem 0.25rem;
    word-break: break-word;
    overflow-wrap: break-word;
}

.customer-orders-page .items-table td {
    background: rgba(255, 255, 255, 0.9);
    border-color: var(--border-light);
    padding: 0.5rem 0.25rem;
    word-break: break-word;
    overflow-wrap: break-word;
    overflow: hidden;
    text-overflow: ellipsis;
}

.customer-orders-page .items-table tbody tr:nth-child(even) {
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.02) 0%, rgba(255, 255, 255, 0.9) 100%);
}

/* Enhanced Text Colors */
.customer-orders-page .text-muted {
    color: var(--text-muted) !important;
}

.customer-orders-page .text-success {
    color: var(--success) !important;
}

.customer-orders-page .text-danger {
    color: var(--danger) !important;
}

.customer-orders-page .text-primary {
    color: var(--primary) !important;
}

.customer-orders-page .text-dark {
    color: var(--dark) !important;
}

.customer-orders-page .fw-medium {
    font-weight: 500;
}

.customer-orders-page .fw-bold {
    font-weight: 600;
}

/* Loading Spinner */
.customer-orders-page .spinner-border {
    display: inline-block;
    width: 2rem;
    height: 2rem;
    vertical-align: text-bottom;
    border: 0.25em solid currentColor;
    border-right-color: transparent;
    border-radius: 50%;
    animation: spinner-border 0.75s linear infinite;
}

@keyframes spinner-border {
    to {
        transform: rotate(360deg);
    }
}

.customer-orders-page .spinner-border-sm {
    width: 1rem;
    height: 1rem;
    border-width: 0.125rem;
    border-color: var(--primary);
    border-right-color: transparent;
    border-radius: 50%;
    animation: spinner-border 0.75s linear infinite;
}

/* Highlight animation for order details */
@keyframes highlight {
    0% {
        background-color: rgba(255, 255, 255, 0.95);
    }
    50% {
        background-color: rgba(99, 102, 241, 0.1);
    }
    100% {
        background-color: rgba(255, 255, 255, 0.95);
    }
}

.customer-orders-page .highlight {
    animation: highlight 1s ease-in-out;
}

/* Comprehensive Responsive Design */
@media (max-width: 768px) {
    .customer-orders-page .row {
        flex-wrap: nowrap !important;
        flex-direction: column !important;
    }
    
    .customer-orders-page .col-md-4,
    .customer-orders-page .col-md-8,
    .customer-orders-page .col-md-2,
    .customer-orders-page .col-md-5 {
        flex: 0 0 100%;
        max-width: 100%;
    }

    .customer-orders-page .page-title {
        font-size: 2rem;
    }

    .customer-orders-page .container-fluid {
        padding: 1rem 0.5rem;
    }

    .customer-orders-page .filter-section {
        padding: 1rem;
    }

    .customer-orders-page .order-list-container {
        max-height: 60vh !important;
    }

    .customer-orders-page .order-list-container .list-group {
        max-height: 60vh !important;
        padding: 0.5rem !important;
        gap: 0.5rem !important;
    }

    .customer-orders-page .dashboard-card:hover,
    .customer-orders-page .customer-card:hover {
        transform: translateY(-1px);
    }
}

@media (max-width: 575.98px) {
    .customer-orders-page .dashboard-card {
        min-height: 350px;
        border-radius: var(--border-radius-sm);
    }
    
    .customer-orders-page .order-list-container .list-group {
        max-height: calc(100vh - 300px);
        min-height: 200px;
        padding: 0.5rem;
        gap: 0.5rem;
    }
    
    .customer-orders-page .order-detail-section {
        padding: 0.75rem;
        min-height: 300px;
        gap: 0.75rem;
        font-size: 0.875rem;
        overflow-x: hidden;
        word-wrap: break-word;
    }
    
    .customer-orders-page .detail-section {
        padding: 0.75rem;
        margin-bottom: 0.75rem;
        overflow: hidden;
    }
    
    .customer-orders-page .detail-section h6 {
        font-size: 0.9rem;
        margin-bottom: 0.75rem;
        line-height: 1.3;
        word-break: break-word;
    }
    
    .customer-orders-page .detail-section .table td {
        padding: 0.25rem;
        font-size: 0.8rem;
        line-height: 1.2;
        word-break: break-word;
        overflow-wrap: break-word;
        border-bottom: 1px solid rgba(99, 102, 241, 0.1);
        vertical-align: middle;
    }
    
    .customer-orders-page .detail-section .table td:first-child {
        font-weight: 500;
        color: var(--gray);
        font-size: 0.75rem;
        width: 35%;
        min-width: 80px;
    }
    
    .customer-orders-page .detail-section .table td:last-child {
        color: var(--dark);
        font-weight: 600;
        font-size: 0.8rem;
        width: 65%;
        word-break: break-word;
    }
    
    .customer-orders-page .card-header {
        padding: 0.75rem 1rem;
        overflow: hidden;
    }
    
    .customer-orders-page .card-header h5 {
        font-size: 1rem;
        line-height: 1.2;
        word-break: break-word;
    }
    
    .customer-orders-page .card-header .subtitle {
        font-size: 0.75rem;
        line-height: 1.2;
    }
    
    /* Mobile specific order-item responsive height */
    .customer-orders-page .order-item {
        height: auto;
        min-height: auto;
        padding: 0;
        margin-bottom: 0.5rem;
        flex-shrink: 0;
    }
    
    .customer-orders-page .order-item-content {
        padding: 0.75rem;
        min-height: auto;
        height: auto;
        flex-shrink: 0;
        gap: 0.5rem;
    }
    
    .customer-orders-page .order-item-header {
        margin-bottom: 0;
        flex-direction: row;
        align-items: flex-start;
        gap: 0.25rem;
        flex-wrap: wrap;
    }
    
    .customer-orders-page .order-item-title {
        gap: 0.4rem;
        width: 100%;
        min-width: 0;
        flex: 1;
    }
    
    .customer-orders-page .order-item-title .order-number {
        font-size: 0.85rem;
    }
    
    .customer-orders-page .order-date {
        font-size: 0.7rem;
    }
    
    .customer-orders-page .order-item-body {
        flex-direction: row;
        gap: 0.5rem;
        align-items: flex-start;
        flex-wrap: wrap;
    }
    
    .customer-orders-page .order-item-details {
        gap: 0.3rem;
        width: 100%;
        flex: 1;
        min-width: 0;
    }
    
    .customer-orders-page .order-category {
        font-size: 0.7rem;
    }
    
    .customer-orders-page .customer-name {
        font-size: 0.75rem;
        line-height: 1.2;
    }
    
    .customer-orders-page .admin-info {
        font-size: 0.7rem;
    }
    
    .customer-orders-page .order-item-amount {
        width: auto;
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        gap: 0.3rem;
        flex-shrink: 0;
    }
    
    .customer-orders-page .order-amount {
        font-size: 0.85rem;
        font-weight: 600;
    }
    
    .customer-orders-page .order-status-badges {
        gap: 0.15rem;
        flex-wrap: wrap;
    }
    
    .customer-orders-page .order-item .badge {
        font-size: 0.65rem;
        padding: 0.2rem 0.4rem;
        line-height: 1.1;
        white-space: nowrap;
    }
    
    /* Mobile responsive badges */
    .customer-orders-page .order-item .badge {
        font-size: 0.6rem;
        padding: 0.15rem 0.35rem;
        line-height: 1;
    }
}

@media (max-width: 480px) {
    .customer-orders-page .page-title {
        font-size: 1.75rem;
    }

    .customer-orders-page .btn {
        padding: 0.5rem 1rem;
        font-size: 0.8rem;
    }

    .customer-orders-page .filter-section {
        padding: 1rem;
    }

    .customer-orders-page .detail-section {
        padding: 1rem;
    }

    .customer-orders-page .detail-header {
        padding: 1rem;
    }
        
    .customer-orders-page .order-list-container {
        max-height: 55vh !important;
    }

    .customer-orders-page .order-list-container .list-group {
        max-height: 55vh !important;
        padding: 0.375rem !important;
        gap: 0.5rem !important;
    }
        
    .customer-orders-page .order-item-content {
        padding: 0.875rem !important;
        gap: 0.5rem !important;
    }
}

@media (min-width: 576px) and (max-width: 767.98px) {
    .customer-orders-page .dashboard-card {
        min-height: 400px;
    }
    
    .customer-orders-page .order-list-container .list-group {
        max-height: calc(100vh - 280px);
        min-height: 250px;
        padding: 0.625rem;
    }
    
    .customer-orders-page .order-detail-section {
        padding: 1rem;
        min-height: 350px;
        font-size: 0.9rem;
        overflow-x: hidden;
    }
    
    .customer-orders-page .detail-section {
        padding: 1rem;
        overflow: hidden;
    }
    
    .customer-orders-page .detail-section .table td {
        padding: 0.3rem;
        font-size: 0.85rem;
        word-break: break-word;
        overflow-wrap: break-word;
    }
    
    .customer-orders-page .detail-section .table td:first-child {
        font-size: 0.8rem;
        width: 38%;
    }
    
    .customer-orders-page .card-header {
        padding: 1rem 1.25rem;
    }
    
    .customer-orders-page .card-header h5 {
        font-size: 1.1rem;
        line-height: 1.3;
    }
    
    /* Small tablet specific order-item responsive height */
    .customer-orders-page .order-item {
        height: auto;
        min-height: auto;
        padding: 0;
        margin-bottom: 0.5rem;
        flex-shrink: 0;
    }
    
    .customer-orders-page .order-item-content {
        padding: 0.75rem;
        min-height: auto;
        height: auto;
        flex-shrink: 0;
        gap: 0.5rem;
    }
    
    .customer-orders-page .order-item .badge {
        font-size: 0.65rem;
        padding: 0.18rem 0.4rem;
    }
}

@media (min-width: 768px) and (max-width: 991.98px) {
    .customer-orders-page .dashboard-card {
        min-height: 450px;
    }
    
    .customer-orders-page .order-list-container .list-group {
        max-height: calc(100vh - 250px);
        min-height: 300px;
        padding: 0.75rem;
    }
    
    .customer-orders-page .order-detail-section {
        padding: 1.25rem;
        min-height: 400px;
        overflow-x: hidden;
    }
    
    .customer-orders-page .detail-section {
        padding: 1.25rem;
        overflow: hidden;
    }
    
    .customer-orders-page .detail-section .table td {
        padding: 0.35rem;
        font-size: 0.9rem;
        word-break: break-word;
        overflow-wrap: break-word;
    }
    
    /* Tablet specific order-item responsive height */
    .customer-orders-page .order-item {
        height: auto;
        min-height: auto;
        padding: 0;
        margin-bottom: 0.75rem;
        flex-shrink: 0;
    }
    
    .customer-orders-page .order-item-content {
        padding: 0.875rem;
        min-height: auto;
        height: auto;
        flex-shrink: 0;
        gap: 0.75rem;
    }
}

/* Desktop Layout Enhancements */
@media (min-width: 992px) {
    .customer-orders-page .dashboard-card {
        min-height: 75vh;
    }
    
    .customer-orders-page .order-list-container .list-group {
        max-height: calc(100vh - 200px);
        min-height: 400px;
        padding: 1rem;
    }
    
    .customer-orders-page .order-detail-section {
        padding: 2rem;
        min-height: 68vh;
        max-height: 68vh;
        overflow-y: auto;
        scrollbar-width: thin;
        scrollbar-color: var(--primary) transparent;
    }
    
    .customer-orders-page .order-detail-section::-webkit-scrollbar {
        width: 8px;
    }
    
    .customer-orders-page .order-detail-section::-webkit-scrollbar-track {
        background: transparent;
    }
    
    .customer-orders-page .order-detail-section::-webkit-scrollbar-thumb {
        background: linear-gradient(135deg, var(--primary) 0%, var(--primary-hover) 100%);
        border-radius: 8px;
        border: 2px solid transparent;
        background-clip: content-box;
    }
}

@media (min-width: 1200px) {
    .customer-orders-page .dashboard-card {
        min-height: 80vh;
    }
    
    .customer-orders-page .order-list-container .list-group {
        max-height: calc(100vh - 180px);
        min-height: 450px;
    }
    
    .customer-orders-page .order-detail-section {
        min-height: 72vh;
        max-height: 72vh;
    }
}

@media (min-width: 1400px) {
    .customer-orders-page .dashboard-card {
        min-height: 83vh;
    }
    
    .customer-orders-page .order-list-container .list-group {
        max-height: calc(100vh - 160px);
        min-height: 500px;
    }
    
    .customer-orders-page .order-detail-section {
        min-height: 75vh;
        max-height: 75vh;
    }
}

    /* Utility Classes */
    .d-flex {
        display: flex;
    }

    .align-items-center {
        align-items: center;
    }

    .align-items-start {
        align-items: flex-start;
    }

    .justify-content-between {
        justify-content: space-between;
    }

    .justify-content-center {
        justify-content: center;
    }

    .flex-wrap {
        flex-wrap: wrap;
    }

    .flex-grow-1 {
        flex-grow: 1;
    }

    .text-center {
        text-align: center;
    }

    .text-end {
        text-align: right;
    }

    .w-100 {
        width: 100%;
    }

    .mb-0 {
        margin-bottom: 0;
    }

    .mb-2 {
        margin-bottom: 0.5rem;
    }

    .mb-3 {
        margin-bottom: 1rem;
    }

    .mb-4 {
        margin-bottom: 1.5rem;
    }

    .mt-3 {
        margin-top: 1rem;
    }

    .me-2 {
        margin-right: 0.5rem;
    }

    .me-3 {
        margin-right: 1rem;
    }

    .ms-2 {
        margin-left: 0.5rem;
    }

    .py-3 {
        padding-top: 1rem;
        padding-bottom: 1rem;
    }

    .py-4 {
        padding-top: 1.5rem;
        padding-bottom: 1.5rem;
    }

    .py-5 {
        padding-top: 3rem;
        padding-bottom: 3rem;
    }

    .gap-2 {
        gap: 0.5rem;
    }

    .d-none {
        display: none;
    }

    .position-fixed {
        position: fixed;
    }

    .top-0 {
        top: 0;
    }

    .start-50 {
        left: 50%;
    }

    .translate-middle-x {
        transform: translateX(-50%);
    }

    .p-3 {
        padding: 1rem;
    }

    .shadow-sm {
        box-shadow: var(--shadow-sm);
    }

    .fade {
        opacity: 1;
    }

    .show {
        display: block;
    }

    .my-4 {
        margin-top: 1.5rem;
        margin-bottom: 1.5rem;
    }

    .g-3>* {
        padding: 0.75rem;
    }

    .list-group {
        display: flex;
        flex-direction: column;
        padding-left: 0;
        margin-bottom: 0;
        border-radius: var(--border-radius);
    }

    .list-group-flush {
        border-radius: 0;
    }

    .list-group-item {
        position: relative;
        display: block;
        padding: 0.5rem 1rem;
        color: var(--text-primary);
        text-decoration: none;
        background-color: var(--surface-primary);
        border: 1px solid var(--border-light);
    }

    .list-group-item:first-child {
        border-top-left-radius: inherit;
        border-top-right-radius: inherit;
    }

    .list-group-item:last-child {
        border-bottom-right-radius: inherit;
        border-bottom-left-radius: inherit;
    }

    .list-group-flush .list-group-item {
        border-right: 0;
        border-left: 0;
        border-radius: 0;
    }

    .list-group-flush .list-group-item:last-child {
        border-bottom-width: 0;
    }

    .h-100 {
        height: 100% !important;
    }

    /* Page Header */
.page-header {
    background: linear-gradient(120deg, #000000 0%, #2a2a2a 100%);
    color: white;
    padding: 2rem;
    border-radius: var(--border-radius);
    margin-bottom: 2rem;
    box-shadow: var(--shadow-lg);
}

.page-header h2 {
    font-weight: 700;
    font-size: 2rem;
    margin-bottom: 0.5rem;
    letter-spacing: -0.025em;
}

.page-header .subtitle {
    opacity: 0.9;
    font-size: 1rem;
}


/* Filter Grid Layout using CSS Grid */
.filter-grid {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.filter-full-width {
    width: 100%;
}

.filter-bottom-row {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1.5rem;
    width: 100%;
}

@media (min-width: 576px) {
    .filter-bottom-row {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (min-width: 992px) {
    .filter-bottom-row {
        grid-template-columns: repeat(3, 1fr);
    }
}

/* Date Range Grid */
.date-range-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-areas: 
        "from to"
        "apply apply";
    gap: 1rem;
}

.date-range-grid input {
   margin-bottom: 0 !important; ;
}

.date-range-grid input:first-child {
    grid-area: from;
}

.date-range-grid input:nth-child(2) {
    grid-area: to;
}

.date-range-grid button {
    grid-area: apply;
    margin-bottom: 8px;
    border-radius: 50px;
}

@media (min-width: 576px) {
    .date-range-grid {
        grid-template-columns: 1fr 1fr 1fr;
        grid-template-areas: "from to apply";
    }
    
    .date-range-grid button {
        margin-bottom: 0;
    }
}

/* Button Group Layout using Flexbox */
.button-group {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-bottom: 0.5rem;
}

@media (max-width: 575.98px) {
    .button-group {
       display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }
    
    .date-range-grid{
        display: flex;
        flex-direction: column;
    }
    .customer-orders-page .status-filter {
        width: 100%;
    }
}


/* Ensuring clean look for form controls across the page */
.customer-orders-page .form-control,
.customer-orders-page .form-select {
    background: rgba(255, 255, 255, 0.9);
    border: 2px solid var(--border);
    border-radius: var(--border-radius-sm);
    transition: var(--transition);
}

.customer-orders-page .form-control:focus,
.customer-orders-page .form-select:focus {
    background: white;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
}
</style>

<div class="customer-orders-page">
<div class="container-fluid my-4">
    <div class="page-header">
        <div class="flex-between">
            <div>
                <h2 class="mb-0">{% if request.session.role == 'superadmin' %}My Orders{% else %}Customer Orders{% endif %}</h2>
                <p class="subtitle mb-0">Manage and track order status, payments, and deliveries</p>
            </div>
            <div class="text-white-50" id="order-count-text">
                <i class="bi bi-box-seam me-2"></i>0 orders found
            </div>
        </div>
    </div>

    <!-- Filters section -->
    <div class="filter-section mb-4">
        <h5><i class="bi bi-funnel me-2"></i>Filter Orders</h5>
        <div class="filter-grid">
            <!-- Status filters -->
            <div class="filter-full-width">                
                <label class="form-label"><i class="bi bi-check-circle me-1"></i>Order Status</label>
                <div class="button-group">
                   <button type="button" class="btn btn-sm btn-outline-primary status-filter" data-filter="all">All</button>
                    <button type="button" class="btn btn-sm btn-outline-secondary status-filter" data-filter="recent">Recent</button>
                    <button type="button" class="btn btn-sm btn-outline-success status-filter" data-filter="completed">Completed</button>
                    <button type="button" class="btn btn-sm btn-outline-blue status-filter" data-filter="ongoing">Processing</button>
                    <button type="button" class="btn btn-sm btn-outline-danger status-filter" data-filter="pending_payment">Pending Payment</button>
                </div>
            </div>

            <!-- Date filters -->
            <div class="filter-full-width">
                <label class="form-label"><i class="bi bi-calendar-range me-1"></i>Date Range</label>
                <div class="date-range-grid">
                    <input type="date" class="form-control form-control-sm" id="date_from" placeholder="From">
                    <input type="date" class="form-control form-control-sm" id="date_to" placeholder="To">
                   <button type="button" class="btn btn-sm btn-primary w-full" id="apply-date-filter"
                        style="margin-bottom: 8px; border-radius: 50px; background: linear-gradient(135deg, #000000, #333333); color: white; letter-spacing: 0.5px; font-weight: 600; box-shadow: var(--shadow-md); padding: 0.625rem 2rem; border: none; position: relative; overflow: hidden; z-index: 1; transition: all 0.3s ease;"
                        onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='var(--shadow-lg)';"
                        onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='var(--shadow-md)';">
                        Apply
                    </button>
                </div>
            </div>

            <!-- Second row with category, sort, search -->
            <div class="filter-bottom-row">
                <!-- Category filter -->
                <div>
                    <label for="category-filter" class="form-label"><i class="bi bi-tag me-1"></i>Category</label>
                    <select id="category-filter" class="form-select form-select-sm">
                        <option value="all">All Categories</option>
                        <option value="1">Rice</option>
                        <option value="2">Paddy</option>
                        <option value="3">Pesticide</option>
                    </select>
                </div>
                
                <!-- Sorting options -->
                <div>
                    <label for="sort" class="form-label"><i class="bi bi-sort-down me-1"></i>Sort By</label>
                    <select class="form-select form-select-sm" id="sort">
                        <option value="-order_date">Newest First</option>
                        <option value="order_date">Oldest First</option>
                        <option value="-overall_amount">Amount (High to Low)</option>
                        <option value="overall_amount">Amount (Low to High)</option>
                    </select>
                </div>
                
                <!-- Search box -->
                <div>
                    <label class="form-label"><i class="bi bi-search me-1"></i>Search Orders</label>
                    <div class="search-container">
                        <i class="bi bi-search"></i>
                        <input type="text" class="form-control form-control-sm search-input" id="search-input" placeholder="Search by order ID, customer name...">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main content with two-panel layout -->
    <div class="order-layout">
        <!-- Left panel: Order list -->
        <div class="order-list-panel">
            <div class="dashboard-card order-list-container">
            <div class="card-header">
                <h5><i class="bi bi-list-ul mr-2"></i>Order List</h5>
                <div class="spinner-border text-primary hidden" id="loading-spinner" role="status">
                <span class="sr-only">Loading...</span>
                </div>
            </div>
            {% csrf_token %}
            <div class="list-group" id="orders-list">
                <div class="empty-state">
                <div class="spinner-border text-primary loading-spinner" role="status">
                    <span class="sr-only">Loading...</span>
                </div>
                </div>
            </div>
            </div>
        </div>

        <!-- Right panel: Order details -->
        <div class="order-details-panel">
            <div class="dashboard-card">
            <div class="card-header">
                    <h5><i class="bi bi-receipt mr-2"></i>Order Details</h5>
                    <div class="subtitle">View comprehensive order information</div>
                </div>
                <div class="order-detail-section" id="order-details">
                    <div class="empty-state">
                    <i class="bi bi-box-seam"></i>
                    <p>Select an order to view details</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>



<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Global variables
        let allOrders = [];
        let filteredOrders = [];
        let selectedOrderId = null;
        let currentFilter = 'all'; // default filter
        let currentSort = '-order_date';
        let dateFrom = '';
        let dateTo = '';
        let currentCategory = 'all';

        // DOM Elements
        const ordersList = document.getElementById('orders-list');
        const orderDetails = document.getElementById('order-details');
        const orderCountText = document.getElementById('order-count-text');
        const statusFilters = document.querySelectorAll('.status-filter');
        const dateFromInput = document.getElementById('date_from');
        const dateToInput = document.getElementById('date_to');
        const applyDateBtn = document.getElementById('apply-date-filter');
        const sortSelect = document.getElementById('sort');
        const loadingSpinner = document.getElementById('loading-spinner');
        const categorySelect = document.getElementById('category-filter');
        const searchInput = document.getElementById('search-input');

        // Set CSRF token for AJAX requests
        const csrfToken = getCookie('csrftoken');

        // Initialization
        fetchOrders();
        
        // Set default active class
        function updateUI() {
            // First, remove active class from all buttons
            statusFilters.forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Then add active class only to the button matching the current filter
            statusFilters.forEach(btn => {
                if (btn.dataset.filter === currentFilter) {
                    btn.classList.add('active');
                }
            });
            
            // Update form controls
            dateFromInput.value = dateFrom;
            dateToInput.value = dateTo;
            sortSelect.value = currentSort;
            categorySelect.value = currentCategory;
        }
        
        // Initial UI update
        updateUI();
        
        // Event Listeners
        statusFilters.forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.preventDefault();
                
                // First, remove active class from all buttons
                statusFilters.forEach(b => {
                    b.classList.remove('active');
                });
                
                // Add active class to clicked button
                this.classList.add('active');
                
                // Set the current filter
                currentFilter = this.dataset.filter;
                
                // Apply filters
                applyFilters();
            });
        });

        applyDateBtn.addEventListener('click', function () {
            dateFrom = dateFromInput.value;
            dateTo = dateToInput.value;
            applyFilters();
        });

        sortSelect.addEventListener('change', function () {
            currentSort = this.value;
            applyFilters();
        });

        categorySelect.addEventListener('change', function () {
            currentCategory = this.value;
            applyFilters();
        });
        
        // Add search input event listener
        searchInput.addEventListener('input', function() {
            applyFilters();
        });

        // Functions
        function fetchOrders() {
            showLoading(true);

            fetch(window.location.pathname, {
                method: 'GET',
                headers: {
                    'X-Requested-With': 'XMLHttpRequest',
                    'X-CSRFToken': csrfToken
                }
            })
                .then(response => {
                    if (!response.ok) throw new Error('Network response was not ok');
                    return response.json();
                })
                .then(data => {
                    allOrders = data.orders;

                    // Convert string dates to Date objects for easier filtering
                    allOrders.forEach(order => {
                        order.orderDateObj = new Date(order.order_date);
                        if (order.delivery_date) {
                            order.deliveryDateObj = new Date(order.delivery_date);
                        }
                    });

                    // Apply initial filters
                    applyFilters();
                    
                    // Ensure UI reflects current filter state
                    updateUI();
                    
                    showLoading(false);
                })
                .catch(error => {
                    console.error('Error fetching orders:', error);
                    ordersList.innerHTML = `
                    <div class="list-group-item">
                        <div class="text-center text-danger py-3">
                            <i class="bi bi-exclamation-triangle-fill me-2"></i>
                            Error loading orders. Please try again.
                        </div>
                    </div>
                `;
                    showLoading(false);
                });
        }

        function applyFilters() {
            showLoading(true);

            // Start with all orders
            let result = [...allOrders];

            // Apply status filter
            switch (currentFilter) {
                case 'completed':
                    result = result.filter(order => order.delivery_status === 1);
                    break;
                case 'ongoing':
                    result = result.filter(order => order.delivery_status === 0);
                    break;
                case 'pending_payment':
                    result = result.filter(order => order.payment_status === 0);
                    break;
                case 'recent':
                    const sevenDaysAgo = new Date();
                    sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7);
                    result = result.filter(order => order.orderDateObj >= sevenDaysAgo);
                    break;
            }

            // Apply category filter
            if (currentCategory !== 'all') {
                const categoryId = parseInt(currentCategory);
                result = result.filter(order => order.product_category_id === categoryId);
            }

            // Apply date range filter
            if (dateFrom) {
                const fromDate = new Date(dateFrom);
                result = result.filter(order => order.orderDateObj >= fromDate);
            }

            if (dateTo) {
                const toDate = new Date(dateTo);
                toDate.setHours(23, 59, 59, 999);
                result = result.filter(order => order.orderDateObj <= toDate);
            }
            
            // Apply search filter if there is search text
            const searchText = searchInput.value.toLowerCase().trim();
            if (searchText) {
                result = result.filter(order => {
                    return (
                        order.order_id.toString().includes(searchText) ||
                        (order.customer_name && order.customer_name.toLowerCase().includes(searchText)) ||
                        (order.customer_id && order.customer_id.toString().includes(searchText))
                    );
                });
            }

            // Apply sorting
            result = sortOrders(result, currentSort);

            // Update filteredOrders
            filteredOrders = result;

            // Update order count text
            updateOrderCountText();

            // Render the orders list
            renderOrdersList();

            // Update selected order if needed
            updateSelectedOrder();

            // Render order details
            renderOrderDetails();

            // Update URL for bookmarking
            updateURL();

            showLoading(false);
        }

        function sortOrders(orders, sortBy) {
            return orders.sort((a, b) => {
                const desc = sortBy.startsWith('-');
                const field = desc ? sortBy.substring(1) : sortBy;

                let valueA, valueB;

                if (field === 'order_date') {
                    valueA = a.orderDateObj;
                    valueB = b.orderDateObj;
                } else {
                    valueA = a[field];
                    valueB = b[field];
                }

                if (valueA < valueB) return desc ? 1 : -1;
                if (valueA > valueB) return desc ? -1 : 1;
                return 0;
            });
        }

        function updateOrderCountText() {
            const count = filteredOrders.length;
            orderCountText.textContent = '';
            const icon = document.createElement('i');
            icon.className = 'bi bi-box-seam me-2';
            orderCountText.appendChild(icon);
            orderCountText.appendChild(document.createTextNode(`${count} ${count === 1 ? 'order' : 'orders'} found`));
        }

        function renderOrdersList() {
            if (filteredOrders.length === 0) {
                ordersList.innerHTML = `
                    <div class="list-group-item">
                        <div class="text-center py-3">
                            <i class="bi bi-search me-2"></i>
                            No orders match your filters
                        </div>
                    </div>
                `;
                return;
            }

            let html = '';
            filteredOrders.forEach(order => {
                const isActive = order.order_id === selectedOrderId;
                const statusClass = order.delivery_status === 1 ? 'status-completed' : 'status-pending';
                const paymentStatus = order.payment_status === 1 ? 'Paid' : 'Pending';
                const paymentStatusBadge = getPaymentStatusBadge(order.payment_status);

                html += `
                    <div class="list-group-item order-item ${isActive ? 'active' : ''}" 
                         data-order-id="${order.order_id}">
                        <div class="d-flex justify-content-between align-items-start mb-2">
                            <div>
                                <span class="fw-medium">Order #${order.order_id}</span>
                                <span class="order-status ms-2">
                                    <span class="order-status-icon ${statusClass}"></span>
                                    <large>${paymentStatusBadge}</large>
                                </span>
                            </div>
                            <small class="text-muted">${formatDate(order.order_date)}</small>
                        </div>
                        <div class="d-flex justify-content-between">
                            <div>
                                <small class="text-muted">${getCategoryName(order.product_category_id)}</small>
                                <small class="d-block">${order.quantity} item(s)</small>
                            </div>
                            <div>
                                <small class="text-muted">${getCategoryName(order.category)}</small>
                                <small class="d-block">${order.quantity} item(s)</small>
                            </div>
                            <div class="text-end">
                                <div class="fw-medium">${order.overall_amount.toLocaleString()}</div>
                                <small class="text-muted">${order.delivery_status === 1 ? 'Delivered' : 'Processing'}</small>
                            </div>
                        </div>
                    </div>
                `;
            });

            ordersList.innerHTML = html;

            // Add click event listeners
            document.querySelectorAll('#orders-list .order-item').forEach(item => {
                item.addEventListener('click', function () {
                    const orderId = parseInt(this.dataset.orderId);

                    // Update selected order
                    document.querySelectorAll('#orders-list .order-item').forEach(el => {
                        el.classList.remove('active');
                    });
                    this.classList.add('active');

                    selectedOrderId = orderId;
                    renderOrderDetails();
                    updateURL();
                });
            });
        }

        function updateSelectedOrder() {
            if (!selectedOrderId || !filteredOrders.some(order => order.order_id === selectedOrderId)) {
                selectedOrderId = filteredOrders.length > 0 ? filteredOrders[0].order_id : null;
            }
        }

        function getPaymentStatusBadge(status) {
            switch (parseInt(status)) {
                case 0: return '<span style="color: red;" class="bg-danger">Unpaid</span>';
                case 1: return '<span style="color: orange;" class="orange-status text-dark">Partially Paid</span>';
                case 2: return '<span style="color: green;" class="bg-success">Fully Paid</span>';
                default: return '<span style="color: white;" class="bg-secondary">Unknown</span>';
            }
        }

        function renderOrderDetails() {
            if (!selectedOrderId) {
                orderDetails.innerHTML = `
                    <div class="text-center py-5">
                        <i class="bi bi-box-seam text-muted" style="font-size: 2.5rem;"></i>
                        <p class="mt-3">Select an order to view details</p>
                    </div>
                `;
                return;
            }

            const order = filteredOrders.find(o => o.order_id === selectedOrderId);
            if (!order) {
                orderDetails.innerHTML = `
                    <div class="text-center py-5">
                        <i class="bi bi-exclamation-triangle text-muted" style="font-size: 2.5rem;"></i>
                        <p class="mt-3">Order not found</p>
                    </div>
                `;
                return;
            }

            const statusClass = order.delivery_status === 1 ? 'status-completed' : 'status-pending';
            const paymentStatusClass = order.payment_status === 1 ? 'text-success' : 'text-danger';
            const paymentStatusBadge = getPaymentStatusBadge(order.payment_status);

            orderDetails.innerHTML = `
                <div class="detail-header">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <span class="fw-medium">Order #${order.order_id}</span>
                            <p class="text-muted mb-0">Placed on ${formatDate(order.order_date)}</p>
                        </div>
                        <div class="order-status">
                            <span class="order-status-icon ${statusClass}"></span>
                            <span class="fw-medium">${order.delivery_status === 1 ? 'Completed' : 'Processing'}</span>
                        </div>
                    </div>
                </div>
                
                <div class="detail-section">
                    <div class="row">
                        <div class="col-md-6 mb-3 mb-md-0">
                            <h6>Order Summary</h6>
                            <table class="table table-sm">
                                <tr>
                                    <td class="text-muted">Category:</td>
                                    <td>${getCategoryName(order.product_category_id)}</td>
                                </tr>
                                ${order.product_category_id === 3 ? '' : `
                                <tr>
                                    <td class="text-muted">Quantity:</td>
                                    <td>${order.quantity}</td>
                                </tr>
                                <tr>
                                    <td class="text-muted">Price Per Unit:</td>
                                    <td>${order.price_per_unit.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</td>
                                </tr>
                                `}
                                <tr>
                                    <td class="text-muted">Total Amount:</td>
                                    <td class="fw-medium">${order.overall_amount.toLocaleString()}</td>
                                </tr>
                            </table>
                        </div>
                        
                        <div class="col-md-6">
                            <h6>Payment Information</h6>
                            <table class="table table-sm">
                                <tr>
                                    <td class="text-muted">Status:</td>
                                    <td><span class="${paymentStatusClass}">${paymentStatusBadge}</span></td>
                                </tr>
                                <tr>
                                    <td class="text-muted">Paid Amount:</td>
                                    <td>${order.paid_amount ? order.paid_amount.toLocaleString() : '0'}</td>
                                </tr>
                                <tr>
                                    <td class="text-muted">GST:</td>
                                    <td>${order.GST || 'N/A'}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                
                <div class="detail-section">
                    <h6>Delivery Information</h6>
                    <table class="table table-sm">
                        <tr>
                            <td class="text-muted">Status:</td>
                            <td>${order.delivery_status === 1 ? 'Delivered' : 'In Transit'}</td>
                        </tr>
                        ${order.delivery_date ? `
                        <tr>
                            <td class="text-muted">Delivery Date:</td>
                            <td>${formatDate(order.delivery_date)}</td>
                        </tr>
                        ` : ''}
                        <tr>
                            <td class="text-muted">Lorry Number:</td>
                            <td>${order.lorry_number || 'N/A'}</td>
                        </tr>
                        <tr>
                            <td class="text-muted">Driver Name:</td>
                            <td>${order.driver_name || 'N/A'}</td>
                        </tr>
                        <tr>
                            <td class="text-muted">Driver Phone:</td>
                            <td>${order.driver_ph_no || 'N/A'}</td>
                        </tr>
                    </table>
                </div>
                
                <div class="d-flex gap-2 for-mobile">
                    ${order.paid_amount < order.overall_amount ? `
                        <form method="post" action="/payment/invoice/" class="flex-grow-1">
                            <input type="hidden" name="csrfmiddlewaretoken" value="${csrfToken}">
                            <input type="hidden" name="order_id" value="${order.order_id}">    
                            <button class="btn btn-primary1 payment-btn w-100"  type="submit">
                                <i class="bi bi-credit-card-fill me-2"></i>Make Payment
                            </button>
                        </form>
                    ` : ''}
                    
                    ${order.delivery_status === 0 ? `
                        <form method="post" action="delivery/" class="flex-grow-1">
                            <input type="hidden" name="csrfmiddlewaretoken" value="${csrfToken}">
                            <input type="hidden" name="order_id" value="${order.order_id}">
                            <input type="hidden" name="delivery_status" value="1">
                            <button class="btn btn-success payment-btn w-100" type="submit">
                                <i class="bi bi-check-circle-fill me-2"></i>Mark as Delivered
                            </button>
                        </form>
                    ` : ''}
                </div>
            `;

            // Add highlight animation
            orderDetails.classList.add('highlight');
            setTimeout(() => {
                orderDetails.classList.remove('highlight');
            }, 1000);
        }

        // Helper Functions
        function formatDate(dateString) {
            if (!dateString) return 'N/A';
            const options = { year: 'numeric', month: 'short', day: 'numeric' };
            return new Date(dateString).toLocaleDateString(undefined, options);
        }

        function getCategoryName(categoryId) {
            switch (categoryId) {
                case 1: return 'Rice';
                case 2: return 'Paddy';
                case 3: return 'Pesticide';
                default: return 'Other';
            }
        }

        function showLoading(isLoading) {
            loadingSpinner.classList.toggle('d-none', !isLoading);
        }

        function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }

        // URL handling for browser history and bookmarking
        function updateURL() {
            const url = new URL(window.location.href);
            url.searchParams.set('filter', currentFilter);

            if (dateFrom) url.searchParams.set('date_from', dateFrom);
            else url.searchParams.delete('date_from');

            if (dateTo) url.searchParams.set('date_to', dateTo);
            else url.searchParams.delete('date_to');

            url.searchParams.set('sort', currentSort);

            if (selectedOrderId) url.searchParams.set('order_id', selectedOrderId);
            else url.searchParams.delete('order_id');

            if (currentCategory !== 'all') url.searchParams.set('category', currentCategory);
            else url.searchParams.delete('category');

            window.history.replaceState({}, '', url);
        }

        // Initialize from URL parameters
        function initFromURL() {
            const urlParams = new URLSearchParams(window.location.search);

            if (urlParams.has('filter')) currentFilter = urlParams.get('filter');
            if (urlParams.has('date_from')) dateFrom = urlParams.get('date_from');
            if (urlParams.has('date_to')) dateTo = urlParams.get('date_to');
            if (urlParams.has('sort')) currentSort = urlParams.get('sort');
            if (urlParams.has('order_id')) selectedOrderId = parseInt(urlParams.get('order_id'));
            if (urlParams.has('category')) currentCategory = urlParams.get('category');

            updateUI();
        }        function updateUI() {
            // Update status filter buttons
            statusFilters.forEach(btn => {
                const filterType = btn.dataset.filter;
                btn.classList.remove('active');
                
                if (filterType === currentFilter) {
                    btn.classList.add('active');
                }
            });

            // Update form controls
            dateFromInput.value = dateFrom;
            dateToInput.value = dateTo;
            sortSelect.value = currentSort;
            categorySelect.value = currentCategory;
        }

        // Initialize from URL if parameters exist
        initFromURL();

        // Handle browser back/forward
        window.addEventListener('popstate', function () {
            initFromURL();
            applyFilters();
        });
    });
</script>
{% endblock content %}